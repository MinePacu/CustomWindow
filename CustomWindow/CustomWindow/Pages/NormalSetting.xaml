<Page
    x:Class="CustomWindow.Pages.NormalSetting"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CustomWindow.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    mc:Ignorable="d">

    <Grid HorizontalAlignment="Stretch" MaxWidth="990">
        <ScrollViewer
            HorizontalAlignment="Stretch"
            IsDeferredScrollingEnabled="True"
            VerticalScrollBarVisibility="Visible"
            MaxWidth="990"
            Margin="0, 20, 0, 20">
            <StackPanel x:Name="Panel" HorizontalAlignment="Stretch" Spacing="4">

                <!-- ========================================
                     1. ÏûêÎèô Î≥ÄÍ≤Ω ÏÑ§Ï†ï Í∑∏Î£π
                     ======================================== -->
                <TextBlock 
                    Text="ÏûêÎèô Î≥ÄÍ≤Ω ÏÑ§Ï†ï" 
                    Margin="0,0,0,4" 
                    FontSize="16" 
                    FontWeight="SemiBold" 
                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>

                <controls:SettingsExpander
                    Header="ÏúàÎèÑÏö∞ ÏÑ§Ï†ï ÏûêÎèô Î≥ÄÍ≤Ω"
                    Description="ÏúàÎèÑÏö∞ ÏÑ§Ï†ïÏùÑ ÏûêÎèôÏúºÎ°ú Î≥ÄÍ≤ΩÌï©ÎãàÎã§."
                    Margin="0,0,0,3">
                    <controls:SettingsExpander.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe943;"/>
                    </controls:SettingsExpander.HeaderIcon>
                    <ToggleSwitch IsOn="{x:Bind ViewModel.AutoWindowChange, Mode=TwoWay}"/>
                    
                    <controls:SettingsExpander.Items>
                        <!-- Ìè¨Í∑∏ÎùºÏö¥Îìú Ï∞Ω Ï†ÑÏö© -->
                        <controls:SettingsCard
                            Header="Ìè¨Í∑∏ÎùºÏö¥Îìú Ï∞ΩÏóêÏÑúÎßå ÌÖåÎëêÎ¶¨ ÌëúÏãú"
                            Description="ÌôúÏÑ± Ï∞Ω(Ìè¨Í∑∏ÎùºÏö¥Îìú)ÏóêÏÑúÎßå ÌÖåÎëêÎ¶¨Î•º ÌëúÏãúÌï©ÎãàÎã§."
                            IsEnabled="{x:Bind ViewModel.AutoWindowChange, Mode=OneWay}">
                            <controls:SettingsCard.HeaderIcon>
                                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE8A7;"/>
                            </controls:SettingsCard.HeaderIcon>
                            <ToggleSwitch 
                                IsOn="{x:Bind ViewModel.ForegroundWindowOnly, Mode=TwoWay}"
                                IsEnabled="{x:Bind ViewModel.AutoWindowChange, Mode=OneWay}"/>
                        </controls:SettingsCard>

                        <!-- Ï†úÏô∏ ÌîÑÎ°úÍ∑∏Îû® -->
                        <controls:SettingsCard
                            Header="Ï†úÏô∏ ÌîÑÎ°úÍ∑∏Îû®"
                            Description="ÌÖåÎëêÎ¶¨Î•º Ï†ÅÏö©ÌïòÏßÄ ÏïäÏùÑ ÌîÑÎ°úÍ∑∏Îû® Î™©Î°ù"
                            ContentAlignment="Vertical"
                            HorizontalContentAlignment="Stretch">
                            <controls:SettingsCard.HeaderIcon>
                                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xed35;"/>
                            </controls:SettingsCard.HeaderIcon>
                            <TextBox 
                                TextWrapping="Wrap"
                                AcceptsReturn="True" 
                                Text="{x:Bind ViewModel.ExcludedProgramList, Mode=TwoWay}"
                                PlaceholderText="ÌîÑÎ°úÍ∑∏Îû® Ïù¥Î¶Ñ ÏûÖÎ†• (Ìïú Ï§ÑÏóê ÌïòÎÇòÏî©)"
                                HorizontalAlignment="Stretch"
                                MinHeight="80"
                                MaxHeight="120"
                                ScrollViewer.VerticalScrollBarVisibility="Auto"
                                Margin="0,8,0,0"/>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>

                <!-- ========================================
                     2. ÌÖåÎëêÎ¶¨ ÏÑúÎπÑÏä§ ÏÑ§Ï†ï Í∑∏Î£π (Í∞úÏÑ†Îê®)
                     ======================================== -->
                <TextBlock 
                    Text="ÌÖåÎëêÎ¶¨ ÏÑúÎπÑÏä§" 
                    Margin="0,20,0,4" 
                    FontSize="16" 
                    FontWeight="SemiBold" 
                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>

                <!-- Ïã§ÏãúÍ∞Ñ ÌÜµÍ≥Ñ ÎåÄÏãúÎ≥¥Îìú -->
                <controls:SettingsCard
                    Header="üìä Ïã§ÏãúÍ∞Ñ ÌÜµÍ≥Ñ"
                    Description="ÌòÑÏû¨ ÌÖåÎëêÎ¶¨ ÏÑúÎπÑÏä§ ÎèôÏûë ÏÉÅÌÉú"
                    ContentAlignment="Vertical"
                    HorizontalContentAlignment="Stretch"
                    Margin="0,0,0,3">
                    <controls:SettingsCard.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE9D9;"/>
                    </controls:SettingsCard.HeaderIcon>
                    
                    <Grid Margin="0,12,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- ÏÉÅÌÉú ÌëúÏãú -->
                        <Grid Grid.Row="0" Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Spacing="4">
                                <TextBlock Text="ÏÑúÎπÑÏä§ ÏÉÅÌÉú" 
                                          FontSize="11" 
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <Ellipse x:Name="ServiceStatusIndicator"
                                            Width="12" Height="12"
                                            Fill="{ThemeResource SystemFillColorCriticalBrush}"/>
                                    <TextBlock x:Name="ServiceStatusText" 
                                              Text="Ï†ïÏßÄÎê®" 
                                              FontWeight="SemiBold"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Spacing="4">
                                <TextBlock Text="Ï∂îÏ†Å Ï§ëÏù∏ Ï∞Ω" 
                                          FontSize="11" 
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="TrackedWindowsText" 
                                          Text="0Í∞ú" 
                                          FontWeight="SemiBold"
                                          FontSize="15"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Spacing="4">
                                <TextBlock Text="ÌÖåÎëêÎ¶¨ Ï†ÅÏö©Îê®" 
                                          FontSize="11" 
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="BorderAppliedText" 
                                          Text="0Í∞ú" 
                                          FontWeight="SemiBold"
                                          FontSize="15"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î -->
                        <ProgressBar Grid.Row="1" 
                                    x:Name="ServiceActivityProgress"
                                    IsIndeterminate="False"
                                    ShowError="False"
                                    ShowPaused="False"
                                    Height="4"
                                    Margin="0,0,0,8"/>
                    </Grid>
                </controls:SettingsCard>

                <controls:SettingsExpander
                    Header="ÌÖåÎëêÎ¶¨ ÏÑúÎπÑÏä§ Í¥ÄÎ¶¨"
                    Description="ÏÑúÎπÑÏä§ Ï†úÏñ¥ Î∞è ÏÑ§Ï†ï"
                    Margin="0,0,0,3">
                    <controls:SettingsExpander.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE9D5;"/>
                    </controls:SettingsExpander.HeaderIcon>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button 
                            x:Name="ForceRedrawButton"
                            Content="üîÑ Îã§Ïãú Í∑∏Î¶¨Í∏∞" 
                            Click="ForceRedrawBorders_Click"
                            IsEnabled="{x:Bind ViewModel.AutoWindowChange, Mode=OneWay}"/>
                        <Button 
                            x:Name="CheckStatusButton"
                            Content="üîç ÏÉÅÌÉú ÌôïÏù∏" 
                            Click="CheckBorderServiceStatus_Click"/>
                    </StackPanel>
                    
                    <controls:SettingsExpander.Items>
                        <!-- Î†åÎçî Î∞©Ïãù -->
                        <controls:SettingsCard
                            Header="Î†åÎçî Î∞©Ïãù"
                            Description="ÌÖåÎëêÎ¶¨ Î†åÎçîÎßÅ Î∞©Î≤ï ÏÑ†ÌÉù">
                            <controls:SettingsCard.HeaderIcon>
                                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE9A2;"/>
                            </controls:SettingsCard.HeaderIcon>
                            <ComboBox x:Name="RenderModeComboBox"
                                     SelectedItem="{x:Bind ViewModel.BorderRenderMode, Mode=TwoWay}" 
                                     MinWidth="120"
                                     SelectionChanged="RenderModeComboBox_SelectionChanged">
                                <x:String>Auto</x:String>
                                <x:String>Dwm</x:String>
                                <x:String>DComp</x:String>
                            </ComboBox>
                        </controls:SettingsCard>
                        
                        <!-- ÎîîÎ≤ÑÍ∑∏ ÏΩòÏÜî ÌëúÏãú -->
                        <controls:SettingsCard
                            Header="ÎîîÎ≤ÑÍ∑∏ ÏΩòÏÜî ÌëúÏãú"
                            Description="Í∞úÎ∞úÏö©: ÏΩòÏÜî Ï∞Ω ÌëúÏãú (Ïû¨ÏãúÏûë ÌïÑÏöî)">
                            <controls:SettingsCard.HeaderIcon>
                                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE7F4;"/>
                            </controls:SettingsCard.HeaderIcon>
                            <ToggleSwitch IsOn="{x:Bind ViewModel.ShowBorderServiceConsole, Mode=TwoWay}"/>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>
                
                <!-- Î†åÎçî Î™®Îìú ÎèÑÏõÄÎßê (Î≥ÑÎèÑ Ïπ¥ÎìúÎ°ú Î∂ÑÎ¶¨) -->
                <controls:SettingsCard
                    Header="Î†åÎçî Î™®Îìú Ï†ïÎ≥¥"
                    Description="Í∞Å Î†åÎçî Î™®ÎìúÏùò ÌäπÏßïÍ≥º ÏÇ¨Ïö© ÏãúÍ∏∞"
                    ContentAlignment="Vertical"
                    HorizontalContentAlignment="Stretch"
                    Margin="0,0,0,3">
                    <controls:SettingsCard.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE946;"/>
                    </controls:SettingsCard.HeaderIcon>
                    
                    <Expander Header="üìñ Î†åÎçî Î™®Îìú ÏÑ§Î™Ö Î≥¥Í∏∞" 
                             HorizontalAlignment="Stretch"
                             Margin="0,8,0,0">
                        <StackPanel Spacing="12" Margin="0,8,0,0">
                            <!-- Auto Î™®Îìú -->
                            <Border x:Name="AutoModeInfoHelp"
                                   Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                                   BorderBrush="{ThemeResource SystemFillColorSuccessBrush}"
                                   BorderThickness="2"
                                   CornerRadius="8"
                                   Padding="12">
                                <StackPanel Spacing="6">
                                    <TextBlock Text="‚úì Auto (ÏûêÎèô) - Í∂åÏû•" 
                                              FontWeight="SemiBold"
                                              Foreground="{ThemeResource SystemFillColorSuccessBrush}"/>
                                    <TextBlock TextWrapping="Wrap"
                                              FontSize="12"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        Windows Î≤ÑÏ†ÑÏóê Îî∞Îùº ÏµúÏ†ÅÏùò Î†åÎçîÎßÅ Î∞©ÏãùÏùÑ ÏûêÎèôÏúºÎ°ú ÏÑ†ÌÉùÌï©ÎãàÎã§.
                                        <LineBreak/>
                                        ‚Ä¢ Windows 11: DWM Î™®Îìú
                                        <LineBreak/>
                                        ‚Ä¢ Windows 10: DComp Î™®Îìú
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                            
                            <!-- DWM Î™®Îìú -->
                            <Border Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                                   BorderBrush="{ThemeResource AccentFillColorDefaultBrush}"
                                   BorderThickness="2"
                                   CornerRadius="8"
                                   Padding="12">
                                <StackPanel Spacing="6">
                                    <TextBlock Text="‚ö° DWM (Desktop Window Manager)" 
                                              FontWeight="SemiBold"
                                              Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                    <TextBlock TextWrapping="Wrap"
                                              FontSize="12"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        WindowsÏùò ÎÑ§Ïù¥Ìã∞Î∏å DWM APIÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Ï∞Ω ÌÖåÎëêÎ¶¨Î•º ÏßÅÏ†ë Ï°∞ÏûëÌï©ÎãàÎã§.
                                    </TextBlock>
                                    
                                    <TextBlock Text="Ïû•Ï†ê:" FontWeight="SemiBold" FontSize="11" Margin="0,4,0,0"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="11"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        ‚úì ÏµúÍ≥†Ïùò ÏÑ±Îä• (CPU/GPU ÏÇ¨Ïö©Îüâ ÏµúÏÜå)
                                        <LineBreak/>
                                        ‚úì Windows 11ÏóêÏÑú ÏôÑÎ≤ΩÌïòÍ≤å ÌÜµÌï©
                                        <LineBreak/>
                                        ‚úì ÍπúÎπ°ÏûÑ ÏóÜÎäî Î∂ÄÎìúÎü¨Ïö¥ Î†åÎçîÎßÅ
                                    </TextBlock>
                                    
                                    <TextBlock Text="Îã®Ï†ê:" FontWeight="SemiBold" FontSize="11" Margin="0,4,0,0"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="11"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        ‚úó Windows 11ÏóêÏÑúÎßå ÏôÑÏ†ÑÌûà ÏßÄÏõê
                                        <LineBreak/>
                                        ‚úó ÌÖåÎëêÎ¶¨ ÎëêÍªò Ï†úÌïú (ÏãúÏä§ÌÖú Ï†úÏïΩ)
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                            
                            <!-- DComp Î™®Îìú -->
                            <Border Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                                   BorderBrush="{ThemeResource AccentFillColorDefaultBrush}"
                                   BorderThickness="2"
                                   CornerRadius="8"
                                   Padding="12">
                                <StackPanel Spacing="6">
                                    <TextBlock Text="üé® DComp (DirectComposition)" 
                                              FontWeight="SemiBold"
                                              Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                    <TextBlock TextWrapping="Wrap"
                                              FontSize="12"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        DirectCompositionÍ≥º Direct2DÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Ïò§Î≤ÑÎ†àÏù¥ Ï∞ΩÏúºÎ°ú ÌÖåÎëêÎ¶¨Î•º Í∑∏Î¶ΩÎãàÎã§.
                                    </TextBlock>
                                    
                                    <TextBlock Text="Ïû•Ï†ê:" FontWeight="SemiBold" FontSize="11" Margin="0,4,0,0"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="11"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        ‚úì Windows 10/11 Î™®Îëê ÏßÄÏõê
                                        <LineBreak/>
                                        ‚úì ÏûêÏú†Î°úÏö¥ ÌÖåÎëêÎ¶¨ ÎëêÍªò Ï°∞Ï†ï
                                        <LineBreak/>
                                        ‚úì Í≥†Í∏â Í∑∏ÎûòÌîΩ Ìö®Í≥º Í∞ÄÎä•
                                    </TextBlock>
                                    
                                    <TextBlock Text="Îã®Ï†ê:" FontWeight="SemiBold" FontSize="11" Margin="0,4,0,0"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="11"
                                              Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        ‚úó DWMÎ≥¥Îã§ ÏïΩÍ∞Ñ ÎÜíÏùÄ Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©
                                        <LineBreak/>
                                        ‚úó ÎìúÎ¨ºÍ≤å Ïò§Î≤ÑÎ†àÏù¥ ÍπúÎπ°ÏûÑ Î∞úÏÉù Í∞ÄÎä•
                                        <LineBreak/>
                                        ‚úó ÏùºÎ∂Ä Ï†ÑÏ≤¥ÌôîÎ©¥ Ïï±Í≥º Ï∂©Îèå Í∞ÄÎä•ÏÑ±
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Expander>
                </controls:SettingsCard>

                <!-- ========================================
                     3. ÏúàÎèÑÏö∞ Ïô∏Í¥Ä ÏÑ§Ï†ï Í∑∏Î£π (ÎØ∏Î¶¨Î≥¥Í∏∞ Ï∂îÍ∞Ä)
                     ======================================== -->
                <TextBlock 
                    Text="ÏúàÎèÑÏö∞ Ïô∏Í¥Ä" 
                    Margin="0,20,0,4" 
                    FontSize="16" 
                    FontWeight="SemiBold" 
                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>

                <controls:SettingsExpander 
                    Header="Ï∞Ω Î™®ÏÑúÎ¶¨ ÏÑ§Ï†ï"
                    Description="Ï∞Ω Î™®ÏÑúÎ¶¨ Ïä§ÌÉÄÏùº ÏÑ†ÌÉù (Windows 11+)"
                    Margin="0,0,0,3">
                    <controls:SettingsExpander.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE91F;"/>
                    </controls:SettingsExpander.HeaderIcon>
                    <ComboBox SelectedItem="{x:Bind ViewModel.WindowCornerMode, Mode=TwoWay}" 
                             MinWidth="150"
                             SelectionChanged="CornerModeComboBox_SelectionChanged">
                        <x:String>Í∏∞Î≥∏</x:String>
                        <x:String>Îë•Í∏ÄÍ≤å ÌïòÏßÄ ÏïäÏùå</x:String>
                        <x:String>Îë•Í∏ÄÍ≤å</x:String>
                        <x:String>Îçú Îë•Í∏ÄÍ≤å</x:String>
                    </ComboBox>
                    
                    <controls:SettingsExpander.Items>
                        <controls:SettingsCard
                            Header="ÎØ∏Î¶¨Î≥¥Í∏∞"
                            ContentAlignment="Vertical"
                            HorizontalContentAlignment="Center">
                            <Border x:Name="CornerPreviewWindow"
                                   Width="200" Height="120"
                                   Background="{ThemeResource LayerFillColorDefaultBrush}"
                                   BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                   BorderThickness="2"
                                   CornerRadius="8"
                                   Margin="0,16,0,16">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- ÌÉÄÏù¥ÌãÄ Î∞î -->
                                    <Grid Grid.Row="0" 
                                         Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                                         CornerRadius="8,8,0,0">
                                        <TextBlock Text="ÎØ∏Î¶¨Î≥¥Í∏∞" 
                                                  VerticalAlignment="Center"
                                                  Margin="12,0,0,0"
                                                  FontSize="11"
                                                  FontWeight="SemiBold"/>
                                    </Grid>
                                    
                                    <!-- ÎÇ¥Ïö© ÏòÅÏó≠ -->
                                    <Grid Grid.Row="1" Padding="12">
                                        <TextBlock Text="ÏÑ†ÌÉùÌïú Î™®ÏÑúÎ¶¨&#x0A;Ïä§ÌÉÄÏùº Ï†ÅÏö©"
                                                  TextAlignment="Center"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  FontSize="11"
                                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                    </Grid>
                                </Grid>
                            </Border>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>

                <!-- ========================================
                     4. Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏÑ§Ï†ï Í∑∏Î£π
                     ======================================== -->
                <TextBlock 
                    Text="Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏÑ§Ï†ï" 
                    Margin="0,20,0,4" 
                    FontSize="16" 
                    FontWeight="SemiBold" 
                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>

                <!-- Í¥ÄÎ¶¨Ïûê Í∂åÌïú ÏÑ§Ï†ï (Í∞úÏÑ†Îê®) -->
                <controls:SettingsExpander
                    Header="Í¥ÄÎ¶¨Ïûê Í∂åÌïú"
                    Margin="0,0,0,3">
                    <controls:SettingsExpander.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe713;"/>
                    </controls:SettingsExpander.HeaderIcon>
                    
                    <!-- ÌòÑÏû¨ ÏÉÅÌÉú ÌëúÏãú -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Border x:Name="AdminStatusBadge"
                               Background="{ThemeResource SystemFillColorCriticalBrush}"
                               CornerRadius="12"
                               Padding="12,4,12,4">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon x:Name="AdminStatusIcon"
                                         FontFamily="Segoe Fluent Icons" 
                                         Glyph="&#xE7BA;"
                                         FontSize="14"/>
                                <TextBlock x:Name="AdminStatusTextHeader" 
                                          Text="ÏùºÎ∞ò ÏÇ¨Ïö©Ïûê"
                                          FontSize="12"
                                          FontWeight="SemiBold"/>
                            </StackPanel>
                        </Border>
                        <Button 
                            x:Name="RestartWithAdminbutton"
                            Content="Í¥ÄÎ¶¨Ïûê Í∂åÌïúÏúºÎ°ú Îã§Ïãú ÏãúÏûë"
                            Click="RestartWithAdminbutton_Click"/>
                    </StackPanel>
                    
                    <controls:SettingsExpander.Items>
                        <controls:SettingsCard
                            ContentAlignment="Vertical"
                            HorizontalContentAlignment="Stretch">
                            <StackPanel Spacing="12">
                                <InfoBar x:Name="AdminInfoBar"
                                        IsOpen="True"
                                        IsClosable="False"
                                        Severity="Warning"
                                        Title="ÌòÑÏû¨ ÏÉÅÌÉú"
                                        Message="ÏùºÎ∞ò ÏÇ¨Ïö©Ïûê Í∂åÌïúÏúºÎ°ú Ïã§Ìñâ Ï§ëÏûÖÎãàÎã§. ÏùºÎ∂Ä Ï∞ΩÏóê Ï†ëÍ∑ºÏù¥ Ï†úÌïúÎê† Ïàò ÏûàÏäµÎãàÎã§."/>
                                
                                <StackPanel>
                                    <CheckBox x:Name="AutoAdminToggle"
                                             IsChecked="{x:Bind ViewModel.AutoAdmin, Mode=TwoWay}">
                                        <TextBlock TextWrapping="Wrap">
                                            <Run Text="ÏûêÎèôÏúºÎ°ú Í¥ÄÎ¶¨Ïûê Í∂åÌïú ÌöçÎìù"/>
                                            <LineBreak/>
                                            <Run Text="ÌîÑÎ°úÍ∑∏Îû® ÏãúÏûë Ïãú ÏûêÎèôÏúºÎ°ú Í¥ÄÎ¶¨Ïûê Í∂åÌïú ÏöîÏ≤≠" 
                                                FontSize="11" 
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                        </TextBlock>
                                    </CheckBox>
                                </StackPanel>
                            </StackPanel>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>

                <!-- ÏãúÏûë Î∞è Ï¢ÖÎ£å ÏÑ§Ï†ï -->
                <controls:SettingsExpander
                    Header="ÏãúÏûë Î∞è Ï¢ÖÎ£å"
                    Description="ÌîÑÎ°úÍ∑∏Îû® ÏãúÏûë Î∞è Ï¢ÖÎ£å ÎèôÏûë ÏÑ§Ï†ï"
                    Margin="0,0,0,3">
                    <controls:SettingsExpander.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE7E8;"/>
                    </controls:SettingsExpander.HeaderIcon>
                    
                    <controls:SettingsExpander.Items>
                        <controls:SettingsCard
                            Header="Î∂ÄÌåÖ Ïãú ÏûêÎèô Ïã§Ìñâ"
                            Description="Windows ÏãúÏûë Ïãú ÏûêÎèôÏúºÎ°ú ÌîÑÎ°úÍ∑∏Îû® Ïã§Ìñâ">
                            <ToggleSwitch IsOn="{x:Bind ViewModel.RunOnBoot, Mode=TwoWay}"/>
                        </controls:SettingsCard>

                        <controls:SettingsCard
                            Header="Ìä∏Î†àÏù¥Î°ú ÏµúÏÜåÌôî"
                            Description="Ï∞ΩÏùÑ Îã´ÏïÑÎèÑ ÏãúÏä§ÌÖú Ìä∏Î†àÏù¥ÏóêÏÑú Í≥ÑÏÜç Ïã§Ìñâ">
                            <ToggleSwitch IsOn="{x:Bind ViewModel.MinimizeToTray, Mode=TwoWay}"/>
                        </controls:SettingsCard>

                        <controls:SettingsCard
                            Header="Ï¢ÖÎ£å Ïãú ÏÑ§Ï†ï Î≥µÏõê"
                            Description="ÌîÑÎ°úÍ∑∏Îû® Ï¢ÖÎ£å Ïãú Î™®Îì† ÏúàÎèÑÏö∞ ÏÑ§Ï†ïÏùÑ Í∏∞Î≥∏Í∞íÏúºÎ°ú Î≥µÏõê">
                            <ToggleSwitch IsOn="{x:Bind ViewModel.RestoreDefaultsOnExit, Mode=TwoWay}"/>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>

                <!-- UI ÏÑ§Ï†ï -->
                <controls:SettingsCard
                    Header="Ïª§Ïä§ÌÖÄ ÌÉÄÏù¥ÌãÄ Î∞î"
                    Description="Windows 11 Ïä§ÌÉÄÏùºÏùò Ïª§Ïä§ÌÖÄ ÌÉÄÏù¥ÌãÄ Î∞î ÏÇ¨Ïö©"
                    Margin="0,0,0,3">
                    <controls:SettingsCard.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE8A5;"/>
                    </controls:SettingsCard.HeaderIcon>
                    <ToggleSwitch IsOn="{x:Bind ViewModel.UseCustomTitleBar, Mode=TwoWay}"/>
                </controls:SettingsCard>

                <!-- ========================================
                     5. Í∞úÎ∞úÏûê ÎèÑÍµ¨ Í∑∏Î£π (Î°úÍ∑∏ Î∑∞Ïñ¥ Í∞úÏÑ†)
                     ======================================== -->
                <TextBlock 
                    Text="Í∞úÎ∞úÏûê ÎèÑÍµ¨" 
                    Margin="0,20,0,4" 
                    FontSize="16" 
                    FontWeight="SemiBold" 
                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>

                <controls:SettingsExpander
                    Header="ÏûêÎèô Î≥ÄÍ≤Ω Ï∂îÏ†Å Î°úÍ∑∏"
                    Description="AutoWindowChange ÎèôÏûë Ï§ë ÏàòÏßëÎêú Ï∞Ω Ï∂îÏ†Å Î°úÍ∑∏"
                    Margin="0,0,0,3"
                    x:Name="WindowTrackerLogExpander">
                    <controls:SettingsExpander.HeaderIcon>
                        <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE7BA;"/>
                    </controls:SettingsExpander.HeaderIcon>
                    <ToggleSwitch
                        IsOn="{x:Bind ViewModel.EnableWindowTrackerLog, Mode=TwoWay}"
                        OnContent="ÌôúÏÑ±Ìôî"
                        OffContent="ÎπÑÌôúÏÑ±Ìôî"
                        ToolTipService.ToolTip="Î°úÍ∑∏ ÏàòÏßëÏùÑ ÌôúÏÑ±Ìôî/ÎπÑÌôúÏÑ±ÌôîÌï©ÎãàÎã§."/>
                    
                    <controls:SettingsExpander.Items>
                        <controls:SettingsCard
                            ContentAlignment="Vertical"
                            HorizontalContentAlignment="Stretch">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Í≤ÄÏÉâ Î∞è ÌïÑÌÑ∞ -->
                                <Grid Grid.Row="0" Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox Grid.Column="0"
                                            x:Name="LogSearchBox"
                                            PlaceholderText="üîç Î°úÍ∑∏ Í≤ÄÏÉâ..."
                                            TextChanged="LogSearchBox_TextChanged"
                                            Margin="0,0,8,0"/>
                                    
                                    <ComboBox Grid.Column="1"
                                             x:Name="LogFilterComboBox"
                                             SelectedIndex="0"
                                             SelectionChanged="LogFilterComboBox_SelectionChanged"
                                             MinWidth="100">
                                        <x:String>Ï†ÑÏ≤¥</x:String>
                                        <x:String>Ïò§Î•ò</x:String>
                                        <x:String>Í≤ΩÍ≥†</x:String>
                                        <x:String>Ï†ïÎ≥¥</x:String>
                                    </ComboBox>
                                </Grid>
                                
                                <!-- Î°úÍ∑∏ ÌëúÏãú ÏòÅÏó≠ -->
                                <TextBox Grid.Row="1"
                                    x:Name="WindowTrackerLogBox"
                                    IsReadOnly="True"
                                    TextWrapping="NoWrap"
                                    FontFamily="Consolas"
                                    FontSize="11"
                                    MinHeight="180"
                                    MaxHeight="300"
                                    AcceptsReturn="True"
                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                    ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                    Text="[Î°úÍ∑∏Í∞Ä ÌëúÏãúÎê©ÎãàÎã§]"/>
                                
                                <!-- ÌÜµÍ≥Ñ Ï†ïÎ≥¥ -->
                                <Grid Grid.Row="2" Margin="0,8,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="16">
                                        <TextBlock FontSize="11">
                                            <Run Text="Î°úÍ∑∏ Ïàò:"/>
                                            <Run x:Name="TotalLogCountText" Text="0" FontWeight="Bold"/>
                                            <Run Text="Í∞ú"/>
                                        </TextBlock>
                                        <TextBlock FontSize="11">
                                            <Run Text="Ïò§Î•ò:"/>
                                            <Run x:Name="ErrorLogCountText" Text="0" FontWeight="Bold" Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                                            <Run Text="Í∞ú"/>
                                        </TextBlock>
                                    </StackPanel>
                                    
                                    <CheckBox Grid.Column="1"
                                             x:Name="AutoScrollCheckBox"
                                             Content="ÏûêÎèô Ïä§ÌÅ¨Î°§"
                                             IsChecked="True"
                                             FontSize="11"/>
                                </Grid>
                                
                                <!-- Î≤ÑÌäº ÏòÅÏó≠ -->
                                <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
                                    <Button Click="RefreshWindowTrackerLogs_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="6">
                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE72C;" FontSize="14"/>
                                            <TextBlock Text="ÏÉàÎ°úÍ≥†Ïπ®"/>
                                        </StackPanel>
                                        <Button.KeyboardAccelerators>
                                            <KeyboardAccelerator Key="F5"/>
                                        </Button.KeyboardAccelerators>
                                    </Button>
                                    <Button Click="CopyWindowTrackerLogs_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="6">
                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE8C8;" FontSize="14"/>
                                            <TextBlock Text="Î≥µÏÇ¨"/>
                                        </StackPanel>
                                        <Button.KeyboardAccelerators>
                                            <KeyboardAccelerator Modifiers="Control" Key="C"/>
                                        </Button.KeyboardAccelerators>
                                    </Button>
                                    <Button Click="ExportWindowTrackerLogs_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="6">
                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xEDE1;" FontSize="14"/>
                                            <TextBlock Text="ÎÇ¥Î≥¥ÎÇ¥Í∏∞"/>
                                        </StackPanel>
                                    </Button>
                                    <Button Click="ClearWindowTrackerLogs_Click">
                                        <StackPanel Orientation="Horizontal" Spacing="6">
                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE74D;" FontSize="14"/>
                                            <TextBlock Text="ÏßÄÏö∞Í∏∞"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
